---
title: 합의 프로토콜
---

## 1. 개요

EOS 블록체인은 분산 방식으로 작동할 수 있는 매우 효율적이고 결정론적인 분산 상태 머신입니다. 블록체인은 일련의 교환된 블록 내에서 트랜잭션을 추적합니다. 각 블록은 동일한 체인을 따라 이전 블록에 암호화 방식으로 커밋됩니다. 따라서 연속 블록의 암호화 검사를 중단하지 않고 주어진 블록에 기록된 트랜잭션을 수정하는 것은 어렵습니다. 이 간단한 사실은 블록체인 트랜잭션을 변경 불가능하고 안전하게 만듭니다.

### 1.1. 블록 생산자

EOS 생태계에서 블록 생성 및 블록 유효성 검사는 "블록 생산자"라는 특수 노드에 의해 수행됩니다. 생산자는 EOS 이해 관계자에 의해 선출됩니다(참조: [4. 프로듀서 투표/스케줄링](#4-producer-votingscheduling)). 각 생산자는 다음을 통해 EOS 노드의 인스턴스를 실행합니다. `nodeos` 서비스. 이러한 이유로 블록을 생산하기 위해 활성 일정에 있는 생산자는 "활성" 또는 "생산" 노드라고도 합니다.

### 1.2. 합의의 필요성

블록 유효성 검사는 모든 분산 노드 그룹 간에 문제를 제시합니다. 분산 시스템 내에서 내결함성 방식으로 이러한 블록을 검증하려면 합의 모델이 있어야 합니다. 합의는 그러한 분산된 노드와 사용자가 블록체인의 현재 상태에 동의하는 방법입니다(참조: [3. EOS 컨센서스(DPoS + aBFT)](#3-eosio-consensus-dpos--abft)).

## 2. 합의 모델

분산 시스템에서 분산된 당사자 그룹 간에 합의에 도달하는 다양한 방법이 있습니다. 대부분의 합의 모델은 몇 가지 증거를 통해 합의에 도달합니다. 가장 인기 있는 두 가지 방법은 작업 증명(PoW)과 지분 증명(PoS)이지만 활동 증명(PoW와 PoS 간의 하이브리드), 소각 증명, 증명과 같은 다른 유형의 증명 기반 방식이 존재합니다. 용량, 경과 시간 증명 등 Paxos 및 Raft와 같은 다른 합의 체계도 존재합니다. 이 문서는 주로 EOS 합의 모델에 중점을 둡니다.

### 2.1. 작업증명(PoW)

블록체인에서 사용되는 가장 일반적인 두 가지 합의 모델은 작업 증명과 지분 증명입니다. 작업 증명에서 광부 노드는 블록이 원하는 속성(일반적으로 블록 헤더의 암호화 해시의 가장 중요한 비트에 있는 특정 수의 0)을 갖도록 하는 블록의 헤더에 추가된 nonce를 찾기 위해 경쟁합니다. 블록을 유효하게 만드는 논스를 찾는 데 계산 비용이 많이 들게 함으로써 공격자가 네트워크의 나머지 부분에서 최고의 체인으로 받아들일 수 있는 블록체인의 대체 포크를 만드는 것이 어려워집니다. 작업 증명의 주요 단점은 네트워크 보안이 난스를 찾기 위해 컴퓨팅 성능에 많은 리소스를 소비하는 데 달려 있다는 것입니다.

### 2.2. 지분 증명(PoS)

Proof-of-Stake에서 가장 큰 지분 또는 일부 자산의 비율을 소유한 노드는 동등한 결정 권한을 갖습니다. 즉, 보팅 파워는 보유한 지분에 비례합니다. 흥미로운 변형 중 하나는 위임 지분 증명(DPoS)으로, 많은 수의 참가자 또는 이해 관계자가 더 적은 수의 대리인을 선출하고, 이들이 대신 결정을 내립니다.

## 3. EOS 컨센서스(DPoS + aBFT)

EOS 블록체인은 위임 지분 증명(DPoS)을 사용하여 네트워크에서 유효한 블록에 서명할 수 있는 활성 생산자를 선출합니다. 그러나 이는 EOS 합의 과정의 절반에 불과합니다. 나머지 절반은 각 블록이 최종(비가역)이 될 때까지 각 블록을 확인하는 실제 프로세스에 참여하며, 이는 비동기 비잔틴 내결함성(aBFT) 방식으로 수행됩니다. 따라서 EOS 합의 모델에는 두 가지 레이어가 있습니다.

* 레이어 1 - 기본 합의 모델(aBFT).
* 레이어 2 - 위임 지분 증명(DPoS).

EOS에서 사용되는 실제 기본 합의 모델에는 위임/투표, 지분 또는 토큰에 대한 개념이 없습니다. 이는 DPoS 계층에서 블록 생산자의 첫 번째 일정을 생성하는 데 사용되며, 해당되는 경우 각 생산자가 순환한 후 매 일정 라운드마다 세트를 업데이트합니다. 이 두 레이어는 EOS 소프트웨어에서 기능적으로 분리되어 있습니다.

### 3.1. 레이어 1: 기본 합의(aBFT)

이 계층은 궁극적으로 선출된 생산자 사이에서 수신 및 동기화된 블록이 결국 최종 블록이 되어 블록체인에 영구적으로 기록되는 블록을 결정합니다. 두 번째 계층에서 제안한 생산자의 일정을 가져옵니다(참조 [3.2. 레이어 2: 위임된 PoS](#32-layer-2-delegated-pos-dpos)) 해당 일정을 사용하여 적절한 생산자가 올바르게 서명한 블록을 결정합니다. 비잔틴 내결함성을 위해 계층은 현재 예약된 세트의 생산자의 2/3가 각 블록을 두 번 확인하는 2단계 블록 확인 프로세스를 사용합니다. 첫 번째 확인 단계에서는 마지막 비가역 블록(LIB)을 제안합니다. 두 번째 단계에서는 제안된 LIB를 최종으로 확인합니다. 이 시점에서 블록은 되돌릴 수 없게 됩니다. 이 계층은 또한 모든 일정 라운드가 시작될 때 생산자 일정 변경 사항(있는 경우)을 알리는 데 사용됩니다.

#### 3.1.1. EOS 알고리즘 최종성
EOS 합의 모델은 어떤 당사자를 결정하기 위해 일정에 따라 배열된 선택된 특별 참가자 세트(활성 생산자)의 서명을 통해 알고리즘 최종성을 달성합니다(작업 증명 모델에서 기껏해야 달성할 수 있는 단순한 확률적 최종성과 다름). 특정 시간 슬롯에 블록에 서명할 권한이 있습니다. 이 일정에 대한 변경은 EOS 블록체인에서 실행되는 권한 있는 스마트 계약에 의해 시작될 수 있지만 일정에 대해 시작된 모든 변경은 일정 변경을 시작한 블록이 두 단계의 확인으로 완료될 때까지 적용되지 않습니다. 확인의 각 단계는 현재 예정된 활성 생산자 세트의 대다수 생산자에 의해 수행됩니다.

### 3.2. 레이어 2: 위임 PoS(DPoS)

위임된 PoS 계층은 토큰, 스테이킹, 투표/대리, 투표 부패, 투표 집계, 생산자 순위 및 인플레이션 지불의 개념을 소개합니다. 이 레이어는 생산자 투표로 생성된 순위에서 새로운 생산자 일정을 생성하는 역할도 담당합니다. 이는 블록 생성자가 블록을 생성하고 서명하기 위해 시간 슬롯을 할당받는 데 걸리는 시간인 약 2분(126초)의 일정 라운드에서 발생합니다. 타임슬롯은 생산자당 총 6초 동안 지속되며, 생산자 라운드는 최대 12개의 블록을 생산하고 서명할 수 있습니다. DPoS 레이어는 WASM 스마트 계약에 의해 활성화됩니다.

#### 3.2.1. 이해관계자 및 대리인

활성 생산자의 실제 선택(생산자 일정)은 매 일정 라운드마다 투표를 위해 공개되며 참여 권리를 행사하는 모든 EOS 이해 관계자가 참여합니다. 하지만 실제 활동 중인 프로듀서의 순위는 자주 바뀌지 않습니다. 이해관계자는 DPoS 대리인으로서 자신을 대신하여 행동할 선호하는 블록 생산자에게 투표하는 일반 EOS 계정 소유자입니다. 그러나 일반 DPoS와 크게 다른 점은 일단 선출되면 모든 블록 생산자가 얻은 투표 순위에 관계없이 동등한 권한을 갖는다는 것입니다. 다른 DPoS 모델에서 투표권은 각 대리인이 얻은 투표 수에 비례합니다.

### 3.3. 합의 과정

EOS 합의 프로세스는 두 부분으로 구성됩니다.

* 생산자 투표/스케줄링 - DPoS 레이어 2에서 수행
* 블록 생성/검증 - 네이티브 컨센서스 레이어 1에서 수행

이 두 프로세스는 블록체인의 첫 번째 제네시스 블록이 생성되는 부팅 시퀀스 후 첫 번째 일정 라운드를 제외하고는 독립적이며 병렬로 실행될 수 있습니다.

## 4. 프로듀서 투표/스케줄링

다음 일정에 포함될 활성 생산자의 투표는 DPoS 계층에서 구현됩니다. 엄밀히 말하면 토큰 보유자는 스테이크홀더가 되기 위해 먼저 일부 토큰을 스테이킹해야 하며 따라서 주어진 스테이킹 파워로 투표할 수 있습니다.

### 4.1. 투표 절차

각 EOS 이해관계자는 한 번의 투표로 최대 30명의 블록 생산자에게 투표할 수 있습니다. 그러면 상위 21명의 선출된 생산자가 DPoS 대표로 활동하여 이해 관계자를 대신하여 블록을 생산하고 서명합니다. 나머지 프로듀서는 득표 순으로 대기자 명단에 오른다. 투표 프로세스는 각 프로듀서가 얻은 투표 수를 합산하여 모든 일정 라운드를 반복합니다. 에 투표하지 않은 제작자는 투표 감소로 인해 감가 상각되더라도 이전 투표를 유지할 수 있습니다. 에 투표한 제작자는 각 유권자의 마지막 투표 가중치 기여도를 제외하고 이전 투표를 유지하게 되며, 이는 새로운 투표 가중치로 대체됩니다.

#### 4.1.1. 투표 가중치

각 이해관계자의 투표 가중치는 스테이킹된 토큰 수와 2000년 1월 1일로 정의된 EOS 블록 타임스탬프 이후 경과된 시간의 함수로 계산됩니다. 현재 구현에서 투표 가중치는 스테이킹된 토큰과 2000년 이후 경과된 시간에 기하수 2로 기하급수적으로 비례합니다. 실제 가중치는 주당 $2^{1/52} = 1.013419$의 비율로 증가합니다. 이것은 투표 가중치가 매주 변경되고 동일한 양의 토큰이 스테이킹된 경우 매년 두 배가 된다는 것을 의미합니다.

#### 4.1.2. 투표 부패

투표 가중치를 높이면 각 프로듀서가 보유한 현재 투표가 감가 상각됩니다. 이러한 투표 감소는 의도적이며 그 이유는 두 가지입니다.

* 새로운 투표가 이전 투표보다 더 많은 가중치를 갖도록 하여 참여를 독려합니다.
* 중요한 거버넌스 문제에 적극적으로 참여하는 사용자에게 더 많은 목소리를 냅니다.

### 4.2. 생산자 일정

프로듀서들이 투표를 거쳐 다음 일정으로 선정되면 프로듀서 이름의 가나다순으로 정렬됩니다. 이것은 생산 순서를 결정합니다. 각 생산자는 시작하려는 현재 일정 라운드에서 유효성을 검사할 첫 번째 블록 내에서 다음 일정 라운드에 대해 제안된 생산자 집합을 받습니다. 제안된 일정을 포함하는 첫 번째 블록이 대다수의 생산자 + 1에 의해 되돌릴 수 없는 것으로 간주되면 제안된 일정은 다음 일정 라운드를 위해 활성화됩니다.

#### 4.2.1. 생산 매개변수

EOS 블록 생산 일정은 선출된 생산자들에게 균등하게 분배됩니다. 생산자는 다음 매개변수(일정 라운드당)를 기반으로 각 일정 라운드마다 예상되는 수의 블록을 생성하도록 예정되어 있습니다.

매개변수 | 설명 | 기본값 | 층
-|-|-|-
**P** (생산자) | 활성 생산자 수 | 21 | 2
**BP** (블록/생산자) | 생산자당 연속 블록 수 | 12 | 1
**Tb** (s/블록) | 블록당 생산 시간(s: 초) | 0.5 | 1

Bp(생산자당 연속 블록 수) 및 Tb(블록당 생산 시간)는 레이어 1 합의 상수라는 점을 언급하는 것이 중요합니다. 반대로 P(활성 생산자 수)는 DPoS 계층에 의해 구성된 계층 2 상수이며 WASM 계약에 의해 활성화됩니다.

위의 매개변수에서 다음 변수를 정의할 수 있습니다(일정 라운드당).

변수 | 설명 | 방정식
-|-|-
**B** (블록) | 총 블록 수 | Bp(블록/생산자) x P(생산자)
**Tp** (s/생산자) | 생산자당 생산 시간 | Tb(s/블록) x BP(블록/생산자)
**T**(들) | 총 생산 시간 | Tp(s/생산자) x P(생산자)

따라서 레이어 2에서 정의되는 P의 값은 EOS 블록체인에서 동적으로 변경될 수 있습니다. 그러나 실제로 N은 전략적으로 21명의 생산자로 설정됩니다. 즉, 합의에 도달하려면 생산자의 2/3에 1을 더한 절대 다수에 15명의 생산자가 필요합니다.

#### 4.2.2. 프로덕션 기본값

현재 기본값: P=선출된 생산자 21명, Bp=생산자당 생성된 블록 12개, T=0.5초마다 생성된 블록, 현재 생성 시간은 다음과 같습니다(일정 라운드당).

변수 | 값
-|-
**Tp**: 생산자당 생산 시간 | Tp = 0.5(s/블록) x 12(블록/생산자) ⇒ Tp = 6(s/생산자)
**T**: 총 생산 시간 | T = 6(s/생산자) x 21(생산자) ⇒ T = 126(s)

할당된 시간 슬롯 동안 주어진 생산자에 의해 블록이 생성되지 않으면 블록체인에 공백이 생깁니다.

## 5. 블록 라이프사이클

블록은 할당된 시간 슬롯 동안 일정에 따라 활성 생산자에 의해 생성된 다음 동기화 및 유효성 검사를 위해 다른 생산자 노드로 전달됩니다. 이 프로세스는 이후 일정 라운드에서 새로운 생산자 일정이 승인될 때까지 생산자에서 생산자로 계속됩니다. 유효한 블록이 합의 요구 사항을 충족하는 경우(참조 [3. EOS 합의](#3-eosio-consensus-dpos--abft)) 블록이 최종 블록이 되고 되돌릴 수 없는 것으로 간주됩니다. 따라서 블록은 수명 동안 생산, 검증 및 최종성이라는 세 가지 주요 단계를 거칩니다. 각 단계는 다양한 단계를 거칩니다.

### 5.1. 블록 구조

체인 간 블록 시퀀스로서 블록체인 내의 기본 단위는 블록입니다. 블록에는 사전 검증된 트랜잭션의 기록과 블록 확인, 검증 중 트랜잭션 재실행, 블록체인 재생, 재생 공격에 대한 보호 등에 필요한 해시 및 서명과 같은 추가 암호화 오버헤드가 포함됩니다. `block` 아래 스키마).

#### 블록 스키마

이름 | 유형 | 설명
-|-|-
`timestamp` | `block_timestamp_type` | 이 블록이 생성되는 예상 시간 슬롯(.000 또는 .500초 후에 종료됨)
`producer` | `name` | 이 블록 생산자의 계정 이름
`confirmed` | `uint16_t` | 현재 생산자 일정에서 이 블록의 생산자가 확인한 이전 블록 수
`previous` | `block_id_type` | 이전 블록의 블록 ID
`transaction_mroot` | `checksum256_type` | 블록에 포함된 거래 영수증의 머클 트리 루트 해시
`action_mroot` | `checksum256_type` | 블록에 포함된 조치 영수증의 머클 트리 루트 해시
`schedule_version` | `uint32_t` | 생성 이후 프로듀서 일정이 변경된 횟수
`new_producers` | `producer_schedule_type` | 새로 제안된 생산자 일정에 대한 생산자 이름 및 키를 보유합니다. 변경 사항이 없으면 null
`header_extensions` | `extensions_type` | 추가 기능을 지원하도록 블록 필드를 확장합니다(블록 ID 계산에 포함됨).
`producer_signature` | `signature_type` | 블록을 생성하고 서명한 생산자의 디지털 서명
`transactions` | 의 배열 `transaction_receipt` | 블록에 포함된 유효한 거래 영수증 목록
`block_extensions` | `extension_type` | 추가 기능을 지원하도록 블록 필드를 확장합니다(블록 ID 계산에 포함되지 않음).
`id` | `block_id_type` | 이 블록 ID의 UUID(블록 헤더 및 블록 번호의 함수) 유효성 검사/검색 목적으로 블록을 쿼리하는 데 사용할 수 있습니다.
`block_num` | `uint32_t` | 블록 번호(제네시스 블록 0 이후의 순차적 카운터 값); 유효성 검사/검색 목적으로 블록을 쿼리하는 데 사용할 수 있습니다.
`ref_block_prefix` | `uint32_t` | 블록 ID 하위 32비트; 재생 공격을 방지하는 데 사용

일부 블록 필드는 블록이 생성될 때 미리 알려져 있으므로 블록 초기화 중에 추가됩니다. 트랜잭션 및 작업에 대한 머클 루트 해시, 블록 번호 및 블록 ID, 블록을 생성하고 서명한 생산자의 서명 등과 같은 다른 것들은 블록 종료 중에 계산되고 추가됩니다. [네트워크 피어 프로토콜: 3.1. 블록 ID](03_network-peer-protocol.md#31-block-id))

### 5.2. 블록 생산

블록 생성의 각 일정 라운드 동안 일정에 따라 생산자는 가능한 한 많은 검증된 트랜잭션을 포함하는 Bp=12 연속 블록을 생성해야 합니다. 각 블록은 현재 Tb=500ms(0.5s) 범위 내에서 생성됩니다. 각 블록을 생성하고 유효성 검사를 위해 다른 노드로 전송하는 데 충분한 시간을 보장하기 위해 블록 생성 시간은 구성 가능한 두 매개 변수로 더 나뉩니다.

* **최대 처리 간격**: 트랜잭션을 블록으로 푸시하는 시간 창(현재 200ms로 설정됨).
* **최소 전파 시간**: 블록을 다른 노드로 전파하는 시간 창(현재 300ms로 설정됨).

아직 만료되지 않았거나 이전 유효성 검사 실패의 결과로 삭제된 모든 느슨한 트랜잭션은 블록 포함 및 다른 노드와의 동기화를 위해 로컬 대기열에 보관됩니다. 블록 생성 중에 스케줄된 트랜잭션은 스케줄에 따라 프로듀서에 의해 적용되고 검증되며 유효한 경우 처리 간격 내에서 보류 중인 블록으로 푸시됩니다. 거래가 이 기간을 벗어나면 적용되지 않고 다음 블록에 포함되도록 다시 예약됩니다. 현재 생산자에 사용할 수 있는 블록 슬롯이 더 이상 없으면 거래는 결국 다른 생산 노드에 의해 선택되고(P2P 프로토콜을 통해) 다른 블록으로 푸시됩니다. 최대 처리 간격은 다음 생산자로 핸드오프하는 동안 네트워크 대기 시간을 보상하기 위해 마지막 블록(Bp 블록의 생산자 라운드에서)에 대해 약간 적습니다. 처리 간격이 끝날 때까지 보류 중인 블록에는 더 이상 트랜잭션이 허용되지 않으며 블록은 유효성 검사를 위해 다른 블록 생산자에게 브로드캐스트되기 전에 완료 단계를 거칩니다.

블록은 생산 중에 적용, 완료, 서명 및 커밋과 같은 다양한 단계를 거칩니다.

#### 5.2.1. 차단 적용

Apply 블록은 본질적으로 생성 노드가 수신하고 검증한 트랜잭션을 블록으로 푸시합니다. 내부적으로 이 단계에는 블록 헤더와 서명된 블록 인스턴스의 생성 및 초기화가 포함됩니다. 서명된 블록 인스턴스는 단순히 서명 필드로 블록 헤더를 확장합니다. 이 필드는 결국 블록에 서명하는 생산자의 서명을 보유합니다. 또한 EOS의 최근 변경 사항을 통해 헤더 확장 필드에 저장되는 여러 서명을 포함할 수 있습니다.

#### 5.2.2. 블록 마무리

생성된 블록은 서명, 커밋, 전달 및 검증되기 전에 완료되어야 합니다. 종료하는 동안 암호화 유효성 검사에 필요한 블록 헤더의 모든 필드가 계산되어 블록에 저장됩니다. 여기에는 작업 수신 목록과 블록에 푸시된 트랜잭션 수신 목록에 대한 머클 트리 루트 해시 생성이 포함됩니다.

#### 5.2.3. 사인 블록

트랜잭션이 블록에 푸시되고 블록이 완료되면 생산자가 블록에 서명할 준비가 된 것입니다. 여기에는 블록에 포함된 트랜잭션 영수증을 포함하는 블록 헤더의 직렬화된 콘텐츠에서 서명 다이제스트를 계산하는 작업이 포함됩니다. 생산자의 개인 키로 블록에 서명한 후 서명 다이제스트가 서명된 블록 인스턴스에 추가됩니다. 이것으로 블록 서명이 완료됩니다.

#### 5.2.4. 커밋 블록

블록이 서명되면 로컬 체인에 커밋됩니다. 이렇게 하면 블록이 가역 블록 데이터베이스로 푸시됩니다(참조 [네트워크 피어 프로토콜: 2.2.3. 포크 데이터베이스](03_network-peer-protocol.md#223-fork-database)). 이렇게 하면 유효성 검사를 위해 블록을 다른 노드와 동기화할 수 있습니다(참조 [네트워크 피어 프로토콜](03_network_peer_protocol.md) 블록 동기화에 대한 자세한 내용은 참조).

### 5.3. 블록 유효성 검사

블록 유효성 검사는 EOS 블록체인 내에서 합의에 도달하는 데 필요한 기본 작업입니다. 블록 유효성 검사 중에 생산자는 다른 피어로부터 들어오는 블록을 받고 각 블록에 포함된 트랜잭션을 확인합니다. 블록 유효성 검사는 활성 생산자 간에 다음 사항에 동의하기에 충분한 정족수에 도달하는 것입니다.

* 블록의 무결성 및 블록에 포함된 트랜잭션.
* 각 블록 내 트랜잭션의 결정론적 시간 순서.

블록 검증을 위한 첫 번째 단계는 노드가 블록을 수신할 때 시작됩니다. 이 시점에서 일부 안전 검사가 블록에서 수행됩니다. 블록이 이미 알려진 블록에 연결되지 않거나 노드가 이미 수신하여 처리한 블록의 블록 ID와 일치하는 경우 해당 블록은 폐기됩니다. 블록이 새 블록인 경우 처리를 위해 체인 컨트롤러로 푸시됩니다.

#### 5.3.1. 푸시 블록

체인 컨트롤러가 블록을 수신하면 소프트웨어는 로컬 체인 내에서 블록을 추가할 위치를 결정해야 합니다. 포크 데이터베이스, 줄여서 포크 DB가 이 용도로 사용됩니다. 포크 데이터베이스는 수신되었지만 아직 완료되지 않은 가역 블록이 있는 모든 분기를 보유합니다. 이를 위해 다음 단계가 수행됩니다.

1. 포크 데이터베이스에 블록을 추가합니다.
2. 현재 헤드 블록이 포함된 메인 브랜치에 블록이 추가되면 블록을 적용합니다. [5.2.1. 차단 적용](#521-apply-block)); 또는
3. 블록을 다른 분기에 추가해야 하는 경우:
    1. 해당 분기가 현재 기본 분기와 비교하여 이제 선호 분기가 되는 경우: 가장 가까운 공통 조상까지 모든 블록을 되감고(및 프로세스에서 데이터베이스 상태를 롤백) 다른 분기의 모든 블록을 다시 적용하고 새 블록을 추가합니다. 차단하고 적용합니다. 이제 해당 분기가 새로운 기본 분기가 됩니다.
    2. 그렇지 않은 경우: 포크 데이터베이스의 해당 분기에 새 블록을 추가하고 다른 작업은 수행하지 않습니다.

블록이 포크 데이터베이스에 추가되려면 일부 블록 유효성 검사가 수행되어야 합니다. 포크 데이터베이스에 블록을 추가하기 전에 항상 블록 헤더 유효성 검사를 수행해야 합니다. 그리고 블록을 적용해야 하는 경우 블록 내 트랜잭션에 대한 일부 유효성 검사가 발생해야 합니다. 트랜잭션이 검증되는 정도는 nodeos가 구성된 검증 모드에 따라 다릅니다. 전체 유효성 검사(기본 모드) 및 간단한 유효성 검사의 두 가지 블록 유효성 검사 모드가 지원됩니다.

#### 5.3.2. 전체 검증

전체 유효성 검사 모드에서는 적용되는 모든 트랜잭션이 완전히 유효성 검사됩니다. 여기에는 트랜잭션의 서명 확인 및 승인 확인이 포함됩니다.

#### 5.3.3. 가벼운 검증

가벼운 유효성 검사 모드에서 신뢰할 수 있는 생산자가 서명한 블록(노드당 로컬로 구성 가능)은 전체 유효성 검사 중에 수행된 일부 트랜잭션 유효성 검사를 건너뛸 수 있습니다. 예를 들어 서명 확인을 건너뛰고 작업에 대해 요청된 모든 인증이 유효한 것으로 간주됩니다.

### 5.4. 블록 최종성

블록 완결성은 EOS 합의의 최종 결과입니다. 대다수의 활성 생산자가 합의 규칙에 따라 블록을 검증한 후에 달성됩니다(참조 [3.1. 레이어 1: 기본 합의(aBFT)](#31-layer-1-native-consensus-abft)). Finality에 도달한 블록은 블록체인에 영구적으로 기록되며 취소할 수 없습니다. 이와 관련하여 체인의 마지막 비가역 블록(LIB)은 최종 블록이 된 가장 최근의 블록을 의미합니다. 따라서 그 시점부터 블록체인에 기록된 트랜잭션은 역전되거나 변조되거나 지워질 수 없습니다.

#### 5.4.1. 최종 목표

최종 결정의 주요 요점은 LIB 블록 이전에 적용된 트랜잭션이 수정, 롤백 또는 삭제될 수 없다는 확신을 사용자에게 제공하는 것입니다. LIB 블록은 활성 노드가 가장 긴 분기에 관계없이 빌드할 분기를 빠르고 효율적으로 결정하는 데에도 유용할 수 있습니다. 이는 가장 최근 LIB를 포함하지 않고 주어진 분기가 더 길 수 있기 때문입니다. 이 경우 가장 최근 LIB가 있는 더 짧은 분기를 선택해야 합니다.
